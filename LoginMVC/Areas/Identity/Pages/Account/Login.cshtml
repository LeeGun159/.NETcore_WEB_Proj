@page
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model LoginMVC.Areas.Identity.Pages.Account.LoginModel

@using LoginMVC.Models
@inject SignInManager<LoginUserEx> SignInManager
@inject UserManager<LoginUserEx> UserManager

@{
    Layout = null;
    ViewData["Title"] = "Sign In";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] | MyApp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="~/css/app-saas.min.css" rel="stylesheet" />
    <link href="~/css/icons.min.css" rel="stylesheet" />
</head>
<body class="authentication-bg pb-0">

    <div class="auth-fluid">

        <div class="auth-fluid-form-box">
            <div class="card-body d-flex flex-column h-100 gap-3">

                <!-- Logo -->
                <div class="auth-brand text-center text-lg-start">
                    <a href="/" class="logo-dark">
                        <span><img src="/images/logo-dark.png" alt="dark logo" height="22"></span>
                    </a>
                    <a href="/" class="logo-light">
                        <span><img src="/images/logo.png" alt="logo" height="22"></span>
                    </a>
                </div>

                <div class="my-auto">
                    <h4 class="mt-0">@ViewData["Title"]</h4>
                    <p class="text-muted mb-4">Enter your email and password.</p>

                    <!-- 로그인 폼 -->
                    <form asp-route-returnUrl="@Model.ReturnUrl" method="post">
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                        <div class="mb-3">
                            <label asp-for="Input.Email" class="form-label">Email address</label>
                            <input asp-for="Input.Email" class="form-control" placeholder="Enter your email" />
                            <span asp-validation-for="Input.Email" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Input.Password" class="form-label">Password</label>
                            <input asp-for="Input.Password" class="form-control" placeholder="Enter your password" />
                            <span asp-validation-for="Input.Password" class="text-danger"></span>
                        </div>

                        <div class="mb-3 form-check">
                            <input asp-for="Input.RememberMe" class="form-check-input" id="checkbox-signin" />
                            <label asp-for="Input.RememberMe" class="form-check-label">Remember me</label>
                        </div>

                        <div class="d-grid mb-0 text-center">
                            <button class="btn btn-primary" type="submit">
                                <i class="mdi mdi-login"></i> Log In
                            </button>
                        </div>
                    </form>
                    <!-- 로그인 폼 끝 -->

                    <p class="text-center mt-3">또는</p>
                    <div class="text-center">
	                   <!-- Azure 로그인 버튼 (분리된 폼) -->
	                    <form asp-controller="Account" asp-action="AzureLogin" method="get">
		                    <button type="submit" class="btn btn-outline-dark">
			                    <img src="https://img.icons8.com/color/24/000000/microsoft.png" class="me-1" />
			                    Azure로 로그인
		                    </button>
	                    </form>
                    </div>

                    <p class="mt-3">
                        <a asp-page="#">Forgot your password?</a>
                    </p>
                    <p class="text-center">
	                    Don't have an account?
	                    <a asp-page="#" asp-route-returnUrl="#">
		                    <b>Sign Up</b>
	                    </a>
                    </p>

                </div> <!-- end my-auto -->
            </div> <!-- end card-body -->
        </div> <!-- end auth-fluid-form-box -->

        <div class="auth-fluid-right text-center">
            … your testimonial …
        </div>

    </div> <!-- end auth-fluid -->

    <script src="~/js/vendor.min.js"></script>
    <script src="~/js/app.min.js"></script>
    <partial name="_ValidationScriptsPartial" />
</body>
</html>
